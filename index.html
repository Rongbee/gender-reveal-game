<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ€§åˆ¥æ­æ›‰å°éŠæˆ²</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #fdeff9, #ecf9ff);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    .game {
      background: #fff;
      max-width: 420px;
      width: 90%;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .text {
      font-size: 1.1rem;
      line-height: 1.6;
      margin-bottom: 20px;
    }
    .choices {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    button {
      padding: 12px;
      font-size: 1rem;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      background: #f0f4ff;
      transition: transform 0.1s ease, background 0.2s ease;
    }
    button:hover {
      background: #e0e8ff;
      transform: translateY(-1px);
    }
  </style>
</head>
<body>
  <div class="game">
    <div id="scene-text" class="text"></div>
    <div id="choices" class="choices"></div>
  </div>

  <script>
    // ====== 1. éŠæˆ²è³‡æ–™ï¼ˆä¹‹å¾Œåªè¦æ”¹é€™è£¡å°±å¥½ï¼‰ ======
    //11501211140æ–°å¢
    // æœ€ä¸€é–‹å§‹é¡¯ç¤ºè¼¸å…¥ ID ç•«é¢
  function renderIDInput() {
    const textDiv = document.getElementById("scene-text");
    const choicesDiv = document.getElementById("choices");

    textDiv.innerText = "è«‹è¼¸å…¥ä½ çš„ç©å®¶ IDï¼š";
    choicesDiv.innerHTML = "";

    const input = document.createElement("input");
    input.type = "text";
    input.placeholder = "ç©å®¶ ID";
    input.style.padding = "8px";
    input.style.fontSize = "1rem";
    input.style.width = "70%";

    const btn = document.createElement("button");
    btn.innerText = "é–‹å§‹éŠæˆ²";
    btn.onclick = () => {
      if (input.value.trim() !== "") {
        playerID = input.value.trim();
        console.log("ç©å®¶ ID:", playerID); // å¯å­˜è³‡æ–™åº«
        renderScene(currentScene); // é–‹å§‹éŠæˆ²
      } else {
        alert("è«‹è¼¸å…¥ç©å®¶ IDï¼");
      }
    };

    choicesDiv.appendChild(input);
    choicesDiv.appendChild(btn);
  }
    const scenes = {
      start: {
        text: "æŸå€‹æº«æš–çš„åˆå¾Œï¼Œä½ æ”¶åˆ°äº†ä¾†è‡ªæº–çˆ¸åª½çš„ä¸€å°é‚€è«‹ã€‚\n\nã€åœ¨æ­æ›‰ä¹‹å‰ï¼Œæˆ‘å€‘æƒ³è«‹ä½ é™ªæˆ‘å€‘èµ°ä¸€å°æ®µæ•…äº‹ã€‚ã€",
        choices: [
          { text: "é–‹å§‹æ•…äº‹", next: "q1" }
        ]
      },
      q1: {
        text: "ç¬¬ä¸€å€‹å‚³èªªå‡ºç¾äº†ã€‚\n\nå¤§å®¶ç¸½èªªï¼Œè‚šå­çš„å½¢ç‹€ï¼Œä¼¼ä¹è—è‘—ä¸€é»ç§˜å¯†â‹¯â‹¯",
        choices: [
          { text: "è‚šå­çœ‹èµ·ä¾†åœ“åœ“çš„", next: "q2", value: "round" },
          { text: "è‚šå­æ¯”è¼ƒå°–", next: "q2", value: "pointy" }
        ]
      },
      q2: {
        text: "æœ€è¿‘ï¼Œåª½åª½çš„å£å‘³å¥½åƒæœ‰é»è®ŠåŒ–ã€‚\n\nå†°ç®±è£¡ç¸½æ˜¯å‡ºç¾æŸä¸€é¡é£Ÿç‰©â‹¯â‹¯",
        choices: [
          { text: "ç‰¹åˆ¥æƒ³åƒç”œçš„", next: "end", value: "sweet" },
          { text: "æ¯”è¼ƒæƒ³åƒé¹¹çš„", next: "end", value: "salty" }
        ]
      },
      end: {
        text: "æ•…äº‹èµ°åˆ°æœ€å¾Œäº†ã€‚\n\nåœ¨ä½ å¿ƒä¸­ï¼Œç­”æ¡ˆæ˜¯å¦å·²ç¶“æµ®ç¾ï¼Ÿ",
        choices: [
          { text: "æˆ‘çŒœæ˜¯ç”·å¯¶å¯¶ ğŸ‘¶ğŸ»", next: "finish", value: "boy" },
          { text: "æˆ‘çŒœæ˜¯å¥³å¯¶å¯¶ ğŸ€", next: "finish", value: "girl" }
        ]
      },
      finish: {
        text: "è¬è¬ä½ å®Œæˆé€™æ®µæ—…ç¨‹ ğŸ’›\n\nä½ çš„é¸æ“‡å·²ç¶“è¢«è¨˜éŒ„ä¸‹ä¾†ï¼Œæ­æ›‰ç•¶å¤©è¦‹ï¼",
        choices: []
      }
    };

    // ====== 2. éŠæˆ²ç‹€æ…‹ ======
    let currentScene = "start";
    const playLog = [];

    // ====== 3. ç•«é¢æ¸²æŸ“ ======
    function renderScene(sceneKey) {
      const scene = scenes[sceneKey];
      currentScene = sceneKey;

      document.getElementById("scene-text").innerText = scene.text;
      const choicesDiv = document.getElementById("choices");
      choicesDiv.innerHTML = "";

      scene.choices.forEach(choice => {
        const btn = document.createElement("button");
        btn.innerText = choice.text;
        btn.onclick = () => handleChoice(sceneKey, choice);
        choicesDiv.appendChild(btn);
      });
    }

    // ====== 4. è™•ç†é¸æ“‡ï¼ˆä¹‹å¾Œå¯æ¥è³‡æ–™åº«ï¼‰ ======
    function handleChoice(sceneKey, choice) {
      playLog.push({
        playerID: playerID,  // è¨˜éŒ„ç©å®¶IDï¼Œæ–°å¢01211138
        scene: sceneKey,
        choice: choice.value || choice.text,
        time: new Date().toISOString()
      });

      console.log("ç©å®¶ç´€éŒ„ï¼š", playLog);

      if (choice.next) {
        renderScene(choice.next);
      }
    }

    // ====== 5. å•Ÿå‹•éŠæˆ² ======
    //renderScene(currentScene);
    renderIDInput();
  </script>
</body>
</html>

